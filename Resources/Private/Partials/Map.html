<html xmlns:f="http://typo3.org/ns/TYPO3/CMS/Fluid/ViewHelpers"
			xmlns:sf="http://typo3.org/ns/Evoweb/StoreFinder/ViewHelpers"
			data-namespace-typo3-fluid="true">

<f:section name="content">
<script type="text/javascript">
	var mapConfiguration = {<sf:minify>
		active: true,
		zoom: '{center.zoom}',
        apiConsoleKey: '{settings.apiConsoleKey}',
		<f:for each="{settings.mapConfiguration}" as="configuration" key="name">{name}: '{configuration}',</f:for>
		<f:if condition="{center.latitude}">
		center: {
			lat: <f:format.number decimals="7">{center.latitude}</f:format.number>,
			lng: <f:format.number decimals="7">{center.longitude}</f:format.number>
		},
		</f:if>
		afterSearch: '{afterSearch}'
	</sf:minify>};

	var locations = [<f:for each="{locations}" as="location" iteration="loop">
		{f:render(partial: 'LocationJson', section: 'content', arguments: _all)}<f:if condition="{loop.isLast}"><f:then/><f:else>,</f:else></f:if></f:for>
	];
</script>

<f:spaceless><f:render partial="InfoWindow"/></f:spaceless>

<h3>{settings.storeTitle} <f:translate key="foundText" arguments="{0: 2}"/></h3>

<div id="tx_storefinder_map"></div>
</f:section>

</html>
